<!DOCTYPE html>
<html>
<head>
	<title>听话的方块</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="task_3_4.css">
</head>
<body>
	<p>左转请输入“LEFT”</p>
	<p>右转请输入“RIGHT”</p>
	<p>翻身请输入“BACK”</p>
	<P>前进请输入“GO”</P>
	<div id="square"><img src="1.jpg" id="img" /></div>


	<input type="text" id="input"/>
	<input type="button" value="执行" onclick="getinstru()" />

	<script type="text/javascript">

		/*function getinstru2(){
			var positionLeft=document.getElementById('square').style.left;
			window.alert(positionLeft);
		}*/

		function getinstru(){
			var input=document.getElementById("input");
			/*var positionLeft=document.getElementById('square').style.left;*/
			var position=document.getElementById('img');
			var positionLeft=window.getComputedStyle(position,"").left;
			var positionTop=window.getComputedStyle(position,"").top;
			//window.alert(document.getElementById('img').src);
			var str=document.getElementById('img').src;
			var str1=str.substr(-5);

			var x=parseInt(positionLeft);
			var y=parseInt(positionTop);
			//window.alert(x);

			
			str1=parseInt(str1);
			//window.alert(str1);
			if(input.value=='LEFT'){
				//window.alert('left');
				str1--;
				if(str1==0){str1=4;}
				//window.alert(str1);
			}else if(input.value=='RIGHT'){
				str1++;
				if(str1==5){str1=1;}
				//window.alert('right');
			}else if(input.value=='BACK'){
				if(str1==3){str1=1;}
				else if(str1==4){str1=2;}
				else{str1+=2;}
				//window.alert('back');
			}else if(input.value=='GO'){
				
				if(str1==1){
					y-=20;
				}else if(str1==2){
					x+=20;
				}else if(str1==3){
					y+=20;
				}else{
					x-=20;
				}
				if(x<0||y<0||x>260||y>260){
					return false;
				}
				x+='px';
				y+='px';
				document.getElementById('img').style.left=x;
				document.getElementById('img').style.top=y;
				//window.alert(x);
				//window.alert(y);
			}
			//window.alert(str);
			str1=str1+'.jpg';
			//window.alert(str1);
			str=str.replace(/\d\.jpg/,str1);
			document.getElementById('img').src=str;
		}




	</script>
</body>
</html>